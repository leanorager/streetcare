---
interface Props {
  imageSrc: string;
  imageAlt?: string;

  labelText?: string;
  labelHref?: string;

  title: string;
  subtitle: string;

  href?: string;

  className?: string;
}

const {
  imageSrc,
  imageAlt = "",
  labelText = "",
  labelHref,
  title,
  subtitle,
  href,
  className = "",
} = Astro.props;

const wrapperClasses =
  "group relative overflow-hidden rounded-[20px] bg-black text-white " +
  "w-[315px] h-[380px] md:w-[440px] md:h-[530px]";
---

<article class={wrapperClasses + " " + className}>
  <!-- BAGGRUND + HOVER ZOOM -->
  <img
    src={imageSrc}
    alt={imageAlt}
    class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 ease-out group-hover:scale-105"
  />

  <!-- GRADIENT -->
  <div
    class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black via-black/80 to-black/10"
  >
  </div>

  <!-- TOP: LABEL + PIL -->
  <div
    class="absolute top-0 inset-x-0 z-10 flex items-start justify-between p-4 md:p-5"
  >
    <!-- LABEL — MOBILE: p-small-reg / DESKTOP: p-base-med -->
    {
      labelText &&
        (labelHref ? (
          <a
            href={labelHref}
            class="
            inline-flex w-auto items-center rounded-full bg-grey/70 backdrop-blur-sm
            px-4 py-1.5 p-small-reg
            md:px-5 md:py-2 md:p-base-med
          "
          >
            {labelText}
          </a>
        ) : (
          <span
            class="
            inline-flex w-auto items-center rounded-full bg-grey/70 backdrop-blur-sm
            px-4 py-1.5 p-small-reg
            md:px-5 md:py-2 md:p-base-med
          "
          >
            {labelText}
          </span>
        ))
    }

    <!-- PIL -->
    {
      href && (
        <a
          href={href}
          class="flex h-9 w-9 md:h-10 md:w-10 items-center justify-center 
               rounded-full bg-grey/70 backdrop-blur-sm"
          aria-label="Åbn"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 md:h-5 md:w-5 origin-center transition-transform duration-300 ease-out group-hover:rotate-90"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M7 17L17 7M9 7h8v8"
            />
          </svg>
        </a>
      )
    }
  </div>

  <!-- BUNDTEKST — MOBILE: p-base-med / DESKTOP: h5 -->
  <div class="absolute bottom-0 inset-x-0 z-10 p-4 pb-6 md:p-5 md:pb-8">
    <!-- TITLE -->
    <h2 class="mb-1 p-base-med leading-snug md:h5">
      {title}
    </h2>

    <!-- SUBTITLE -->
    <h3 class="p-base-med leading-snug text-white/80 md:h5">
      {subtitle}
    </h3>
  </div>

  <!-- HELE CARD KLIKBART -->
  {href && <a href={href} class="absolute inset-0 z-0" aria-hidden="true" />}
</article>
