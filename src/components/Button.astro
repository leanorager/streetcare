---
interface Props {
  // 1 = outline sort, 2 = rød, 3 = outline off-white, 4 = hvid baggrund
  variant?: "outline" | "solid-red" | "outline-light" | "solid-white";
  href?: string;
  type?: "button" | "submit" | "reset";
  stylingclasses?: string; // ekstra Tailwind classes
}

const {
  variant = "solid-red",
  href,
  type = "button",
  stylingclasses = "",
} = Astro.props;

// Fælles styling for alle knapper (samme som jeres originale)
const baseClasses =
  "group inline-flex items-center rounded-full " +
  "pl-[20px] pr-[2px] py-[2px] gap-[13px] " +
  "border-[1px] cursor-pointer transition-colors duration-200";

// Tekst-styling (p_large_med)
const textClasses = "p_large_med";

// Variant-specifik styling (samme som jeres originale)
const variantClasses = {
  outline:
    "bg-transparent border-[var(--color-black)] text-[var(--color-black)]",

  "solid-red":
    "bg-[var(--color-red)] border-[var(--color-red)] text-[var(--color-off-white)] hover:bg-[var(--color-dark-red)]",

  "outline-light":
    "bg-transparent border-[var(--color-off-white)] text-[var(--color-off-white)] hover:bg-[var(--color-off-white)] hover:text-[var(--color-dark-red)]",

  "solid-white":
    "bg-[var(--color-white)] border-[var(--color-white)] text-[var(--color-red)] hover:text-[var(--color-dark-red)]",
} as const;

// Cirkel bag pilen (matcher jeres farvelogik for den “ikon-boble”)
const iconWrapVariant = {
  outline: "bg-[var(--color-black)] text-[var(--color-off-white)]",

  "solid-red": "bg-[var(--color-off-white)] text-[var(--color-red)]",

  "outline-light":
    "bg-[var(--color-off-white)] text-[var(--color-red)] border border-[var(--color-red)]",

  "solid-white": "bg-[var(--color-red)] text-[var(--color-off-white)]",
} as const;

const iconWrapBase =
  "inline-flex items-center justify-center rounded-full h-[31px] w-[31px] flex-shrink-0";
---

{
  href ? (
    <a
      href={href}
      class:list={[baseClasses, variantClasses[variant], stylingclasses]}
    >
      <span class={textClasses}>
        <slot />
      </span>

      <span
        class:list={[iconWrapBase, iconWrapVariant[variant]]}
        aria-hidden="true"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4 origin-center transition-transform duration-300 ease-out group-hover:rotate-90"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M7 17L17 7M9 7h8v8"
          />
        </svg>
      </span>
    </a>
  ) : (
    <button
      type={type}
      class:list={[baseClasses, variantClasses[variant], stylingclasses]}
    >
      <span class={textClasses}>
        <slot />
      </span>

      <span
        class:list={[iconWrapBase, iconWrapVariant[variant]]}
        aria-hidden="true"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4 origin-center transition-transform duration-300 ease-out group-hover:rotate-90"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M7 17L17 7M9 7h8v8"
          />
        </svg>
      </span>
    </button>
  )
}
